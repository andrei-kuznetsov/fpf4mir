import ru.spbstu.icc.kspt.kuznetsov.fpf4mir.core.facts.*;
import ru.spbstu.icc.kspt.kuznetsov.fpf4mir.core.requestfacts.*;
import ru.spbstu.icc.kspt.kuznetsov.fpf4mir.core.facts.build.*;
import ru.spbstu.icc.kspt.kuznetsov.fpf4mir.core.facts.build.maven.*;
import ru.spbstu.icc.kspt.kuznetsov.fpf4mir.core.actionfacts.*;

rule "CommandExecutor"
	when
		$cmd : ExecCommand( )
		not ExecStatus( execCommand == $cmd )
	then
		insertLogical( new ExecAction($cmd) );
end

rule "Activity_New"
	when
		$rr : ReqNewActivity(  )
		forall ( $b : Activity( request == $rr )
	             ExecStatus( activity == $b, succeeded == false ) 
 		         ActivityErrorFixed( activity == $b ) )
	then
		insert( $rr.newActivityInstance() );
end